export function formatPolynomial(coeffs, powers) {
  return (
    coeffs
      .map((coeff, index) => {
        // Пропускане на коефициенти, които са нула, за да не се добавят в резултата
        if (coeff === 0) return "";

        const power = powers[index];
        let term = "";

        // Ако степента е 0, просто връщаме коефициента (например: 5)
        if (power === 0) {
          term = `${coeff}`;
          // Ако степента е 1, добавяме коефициента и 'x' (например: 5x или -x)
        } else if (power === 1) {
          term = `${coeff === 1 ? "" : coeff === -1 ? "-" : coeff}x`;
          // Ако степента е по-голяма от 1, добавяме коефициента и 'x' с индекса (например: 5x^2)
        } else {
          term = `${coeff === 1 ? "" : coeff === -1 ? "-" : coeff}x^${power}`;
        }

        return term;
      })
      // Премахване на празни термини (които са били нулеви)
      .filter((term) => term !== "")
      // Обединяване на термините с " + " между тях
      .join(" + ")
      // Замяна на изрази като "+ -" с просто "-"
      .replace(/\+\s*-\s*/g, " - ")
      // Премахване на водещ "+" в началото на полинома (ако има)
      .replace(/^\s*\+\s*/, "")
      // Избягване на случаи, в които два "+" се появяват последователно
      .replace(/\s*\+\s*\+\s*/g, " + ")
      // Избягване на случаи с двойни "-" знаци
      .replace(/\s*\-\s*\-\s*/g, " - ")
  );
}
